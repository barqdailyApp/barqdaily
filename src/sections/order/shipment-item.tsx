import Image from "next/image";
import { useTranslations } from "next-intl";

import { Box, Stack, Typography } from "@mui/material";

import { paths } from "@/routes/paths";

import { useCurrency } from "@/utils/format-number";

import ButtonLink from "@/CustomSharedComponents/link-button";

import { ShipmentProduct } from "@/types/order-details";

export default function ShipmentItem({
  shipment,
}: {
  shipment: ShipmentProduct;
}) {
  const t = useTranslations("Pages.Orders.Single.Shipment");
  const currency = useCurrency();

  const renderTopRow = (
    <Stack direction="row" alignItems="center" spacing={2}>
      <Image
        src={shipment.product_logo}
        alt={shipment.product_name}
        width={60}
        height={60}
        style={{
          borderRadius: "50px",
          objectFit: "cover",
        }}
      />

      <Box sx={{ flexGrow: 1 }}>
        <Typography variant="body1" fontWeight="700">
          {shipment.product_name}
        </Typography>
        <Typography variant="subtitle2" mt={0.5} fontWeight="400">
          {`${t("quantity")} : ${shipment.quantity}`}
        </Typography>
      </Box>

      <Typography variant="subtitle2" fontWeight="400" flexShrink={0}>
        <Typography variant="body2" fontWeight="bold" component="span">
          {`${currency(shipment.product_price)} / `}
        </Typography>
        {shipment.measurement_unit}
      </Typography>
    </Stack>
  );

  const renderBottomRow = (
    <Stack
      direction="row"
      alignItems="center"
      justifyContent="space-between"
      sx={{ mt: 1 }}
    >
      <Typography variant="subtitle2">
        {`${t("total")} : `}
        <Typography variant="inherit" fontWeight="700" component="span">
          {currency(shipment.total_price)}
        </Typography>
      </Typography>

      <ButtonLink
        variant="contained"
        color="primary"
        href={`${paths.products}/${shipment.product_id}`}
      >
        {t("buy_again")}
      </ButtonLink>
    </Stack>
  );

  return (
    <Box px={2}>
      <Stack spacing={1} justifyContent="flex-start">
        {renderTopRow}
        {renderBottomRow}
      </Stack>
    </Box>
  );
}
